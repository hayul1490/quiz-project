// js/quiz.js (ÏàòÏ†ïÎ≥∏)

const QUIZ_TOTAL_COUNT = 20; // üìç Ï¥ù Î¨∏Ï†ú Ïàò
let currentAudio = null; // üìç ÌòÑÏû¨ Ïû¨ÏÉù Ï§ëÏù∏ Ïò§ÎîîÏò§ Í∞ùÏ≤¥Î•º Ï†ÄÏû•Ìï† Î≥ÄÏàò

// üö® [Ï†úÍ±∞] main.jsÏôÄ Ï§ëÎ≥µÎêòÎäî Î™®Îì† ÏÉÅÏàò ÏÑ†Ïñ∏ÏùÑ Ï†úÍ±∞ÌñàÏäµÎãàÎã§.
// LS_USER_NAME, LS_START_TIME, FINAL_VIDEO_ID Îì±Ïùò const ÏÑ†Ïñ∏ÏùÄ Ïù¥Ï†ú ÏóÜÏäµÎãàÎã§.

const quizData = [
    // ... (ÌÄ¥Ï¶à Îç∞Ïù¥ÌÑ∞Îäî Í∑∏ÎåÄÎ°ú Ïú†ÏßÄ)
    {

        q: "Ï≤´ Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'ÍµµÏùÄ ÎÇòÎ≠áÍ∞ÄÏßÄÍ∞Ä ÏÑúÎ°ú Î∂ÄÎî™ÌûàÎäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Ïù¥ ÏÜåÎ¶¨Î•º ÎÇòÌÉÄÎÇ¥Îäî Í∞ÄÏû• Ï†ÅÏ†àÌïú ÏÉÅÌô©ÏùÄ Î¨¥ÏóáÏùºÍπåÏöî?",

        sound: "q1.mp3", 

        options: ["ÍµµÏùÄ ÎÇòÎ≠áÍ∞ÄÏßÄ Ï∂©ÎèåÏùå", "ÏûîÍ∞ÄÏßÄÍ∞Ä Î∞îÎûåÏóê ÌùîÎì§Î¶¨Îäî ÏÜåÎ¶¨", "ÎÇòÎ¨¥Î•º ÌÜ±ÏúºÎ°ú ÏûêÎ•¥Îäî ÏÜåÎ¶¨", "ÎÇòÎ¨¥ ÌÜµÏùÑ ÏÜêÎ∞îÎã•ÏúºÎ°ú ÏπòÎäî ÏÜåÎ¶¨"],

        answerIndex: 0 

    },

    {

        q: "Îëê Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'ÎÇòÎ¨¥ Í∏ÅÎäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Ïù¥ ÏÜåÎ¶¨Í∞Ä ÎÇòÎäî ÏÉÅÌô©ÏùÄ?",

        sound: "q2.mp3",

        options: ["ÏÜêÌÜ±ÏúºÎ°ú ÎÇòÎ¨¥ÌÜµÏùÑ ÎëêÎìúÎ¶¨Îäî ÏÜåÎ¶¨", "Í∏àÏÜçÏúºÎ°ú ÎÇòÎ¨¥ ÌëúÎ©¥ÏùÑ Í∏ÅÎäî ÏÜåÎ¶¨", "ÎÇòÎ¨¥ÌåêÏûêÍ∞Ä Î¨ºÏóê Îú®Îäî ÏÜåÎ¶¨", "ÎÇòÎ≠áÍ∞ÄÏßÄÎ°ú ÎèåÏùÑ Í∏ÅÎäî ÏÜåÎ¶¨"],

        answerIndex: 1 

    },

    {

        q: "ÏÑ∏ Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'ÎÇòÎ¨¥ ÏÜêÌÜ±ÏúºÎ°ú ÏπòÎäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Ïù¥ ÏÜåÎ¶¨Î•º Ïûò Î¨òÏÇ¨Ìïú Í≤ÉÏùÄ?",

        sound: "q3.mp3",

        options: ["ÎÇòÎ¨¥Î•º Ïó∞ÌïÑÎ°ú ÌÜ°ÌÜ° ÎëêÎìúÎ¶¨Îäî ÏÜåÎ¶¨", "ÎÇòÎ¨¥Ïóê ÏÜêÌÜ±ÏùÑ ÎåÄÍ≥† ÌäïÍ∏∞Îäî ÏÜåÎ¶¨", "ÎèåÎ©©Ïù¥Î°ú ÎÇòÎ¨¥Î•º ÏÑ∏Í≤å ÎïåÎ¶¨Îäî ÏÜåÎ¶¨", "Îã®Îã®Ìïú ÎÇòÎ¨¥Í∞Ä Î∂ÄÎü¨ÏßÄÎäî ÏÜåÎ¶¨"],

        answerIndex: 1 

    },

    {

        q: "ÎÑ§ Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'ÎÇòÎ¨¥ÎøåÎ¶¨ Î∞üÎäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Ïñ¥Îñ§ ÏÜåÎ¶¨ÏôÄ Í∞ÄÏû• Ïú†ÏÇ¨Ìï†ÍπåÏöî?",

        sound: "q4.mp3",

        options: ["ÎÇôÏóΩ ÏúÑÎ•º Í±∑Îäî ÏÜåÎ¶¨", "ÎßàÎ•∏ ÎïÖ ÏúÑÎ•º Í±∑Îäî ÏÜåÎ¶¨", "ÌùôÏù¥ ÏÑûÏù∏ Îã®Îã®Ìïú ÎÇòÎ¨¥ÎøåÎ¶¨Î•º Î∞üÎäî ÏÜåÎ¶¨", "ÏûêÍ∞àÎ∞≠ÏùÑ ÏûêÎèôÏ∞®Í∞Ä ÏßÄÎÇòÍ∞ÄÎäî ÏÜåÎ¶¨"],

        answerIndex: 2 

    },

    {

        q: "Îã§ÏÑØ Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'ÎÇòÎ≠áÍ∞ÄÏßÄ Î∂ÄÎü¨Ìä∏Î¶¨Îäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Ïù¥ ÏÜåÎ¶¨Ïùò ÌäπÏßïÏùÄ?",

        sound: "q5.mp3",

        options: ["ÎïÖ ÏÜçÏóêÏÑú ÌíÄÏù¥ ÏÜüÏïÑÎÇòÎäî ÏÜåÎ¶¨", "ÏûëÏùÄ ÎßâÎåÄÍ∞Ä 'Îòë' ÌïòÍ≥† Î∂ÄÎü¨ÏßÄÎäî ÏÜåÎ¶¨", "ÏãúÎÉáÎ¨ºÏù¥ Ï°∏Ï°∏ ÌùêÎ•¥Îäî ÏÜåÎ¶¨", "ÍµµÏùÄ ÎÇòÎ¨¥Í∞Ä ÎÑòÏñ¥ÏßÄÎäî ÏÜåÎ¶¨"],

        answerIndex: 1 

    },

    {

        q: "Ïó¨ÏÑØ Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'ÎÇòÎ≠áÍ∞ÄÏßÄÍ∞Ä Îí§ÏóâÏºú ÌùîÎì§Î¶¨Îäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Ïñ¥Îñ§ ÏÉÅÌô©ÏóêÏÑú Î∞úÏÉùÌï†ÍπåÏöî?",

        sound: "q6.mp3",

        options: ["ÌÉúÌíçÏù¥ Î∂à Îïå ÎÇòÎ¨¥Í∞Ä ÎøåÎ¶¨Ïß∏ ÎΩëÌûàÎäî ÏÜåÎ¶¨", "ÏÇ∞Î∂àÏù¥ ÎÇ¨ÏùÑ Îïå ÎÇòÎ¨¥Í∞Ä ÌÉÄÎäî ÏÜåÎ¶¨", "Í∞ïÌïú Î∞îÎûåÏóê Ïó¨Îü¨ ÏûîÍ∞ÄÏßÄÎì§Ïù¥ Î∂ÄÎî™ÌûàÎäî ÏÜåÎ¶¨", "ÏÉàÎì§Ïù¥ Îë•ÏßÄÎ•º ÌãÄ Îïå ÎÇ¥Îäî ÏÜåÎ¶¨"],

        answerIndex: 2 

    },

    {

        q: "ÏùºÍ≥± Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'ÎÇòÎ≠áÍ∞ÄÏßÄÎ°ú ÎÇòÎ¨¥ÌÜµ Í∏ÅÎäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Ïù¥ ÏÜåÎ¶¨Î•º Îì§Î†§Ï£ºÎäî ÏÉÅÌô©ÏùÄ?",

        sound: "q7.mp3",

        options: ["ÎÇòÎ≠áÍ∞ÄÏßÄÎ°ú Îã§Î•∏ ÎÇòÎ¨¥ÌÜµÏùò ÌëúÎ©¥ÏùÑ ÎßàÏ∞∞ÏãúÌÇ§Îäî ÏÜåÎ¶¨", "ÎèåÏùÑ ÎÇòÎ¨¥ÌÜµÏóê ÎçòÏßÄÎäî ÏÜåÎ¶¨", "Í∏àÏÜç Íº¨Ï±ôÏù¥Î°ú ÎÇòÎ¨¥ÌÜµÏùÑ Îö´Îäî ÏÜåÎ¶¨", "ÎèÑÎÅºÎ°ú ÎÇòÎ¨¥Î•º Ï∞çÎäî ÏÜåÎ¶¨"],

        answerIndex: 0 

    },

    {

        q: "Ïó¨Îçü Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'ÎÇòÎ≠áÍ∞ÄÏßÄÎ°ú Îèå Í∏ÅÎäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Ïù¥ ÏÇ¨Ïö¥ÎìúÏóê Í∞ÄÏû• Í∞ÄÍπåÏö¥ Í≤ÉÏùÄ?",

        sound: "q8.mp3",

        options: ["ÌùôÎ∞îÎã•Ïóê ÎÇòÎ≠áÍ∞ÄÏßÄÎ•º ÎÅå Îïå ÎÇòÎäî ÏÜåÎ¶¨", "ÎÇòÎ¨¥ÌÜµÏùÑ ÎèåÎ°ú ÏπòÎäî ÏÜåÎ¶¨", "ÎÇòÎ¨¥ÏôÄ ÎèåÏù¥ ÎßàÏ∞∞ÌïòÏó¨ ÎÇòÎäî 'ÏÇ≠ÏÇ≠' ÏÜåÎ¶¨", "Îëê Í∞úÏùò ÎèåÎ©©Ïù¥Î•º Î∂ÄÎî™ÌûàÎäî ÏÜåÎ¶¨"],

        answerIndex: 2 

    },

    {

        q: "ÏïÑÌôâ Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'ÎÇòÎ≠áÍ∞ÄÏßÄÎ°ú ÌíÄÏûé Ïä§ÏπòÎäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Î∂ÄÎìúÎü¨Ïö¥ ÎßàÏ∞∞ÏùåÏù¥ ÌäπÏßïÏù∏ ÏÜåÎ¶¨Îäî?",

        sound: "q9.mp3",

        options: ["ÎÇòÎ¨¥Í∞Ä Î∂ÄÎü¨ÏßÄÎäî ÏÜåÎ¶¨", "ÏûîÍ∞ÄÏßÄÎ°ú ÌíÄÏûéÏùÑ Í∞ÄÎ≥çÍ≤å ÌõëÎäî ÏÜåÎ¶¨", "ÏÉàÍ∞Ä ÎÇ†Í∞úÎ•º ÌçºÎçïÏù¥Îäî ÏÜåÎ¶¨", "ÎÇòÎ≠áÏûé ÏúÑÎ°ú ÎπÑÍ∞Ä Îñ®Ïñ¥ÏßÄÎäî ÏÜåÎ¶¨"],

        answerIndex: 1 

    },

    {

        q: "Ïó¥ Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'ÎÇòÎ≠áÏûé Îñ®Ïñ¥ÏßÄÎäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Ïù¥ ÏÜåÎ¶¨Í∞Ä Í∞ÄÏû• Ïûò Îì§Î¶¨Îäî ÎïåÎäî?",

        sound: "q10.mp3",

        options: ["Î∞îÎûåÏù¥ Ï†ÑÌòÄ ÏóÜÏùÑ Îïå ÏûéÏù¥ ÎïÖÏóê ÎãøÎäî ÏÜåÎ¶¨", "Î¨¥ÏÑ±Ìïú Ïà≤ ÏÜçÏóêÏÑú ÎÇòÎ¨¥Í∞Ä ÌùîÎì§Î¶¥ Îïå", "Îã®ÌíçÏûéÏù¥ ÎïÖÎ∞îÎã•Ïóê ÌäÄÏñ¥ Ïò§Î•¥Îäî ÏÜåÎ¶¨", "ÎÇòÎ¨¥Ïóê Î¨ºÏùÑ Ï£ºÎäî ÏÜåÎ¶¨"],

        answerIndex: 0 

    },

    {

        q: "Ïó¥Ìïú Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'ÎÇòÎ≠áÏûé Î∂ÄÏä§Î•¥Îäî ÏÜåÎ¶¨ ÎßåÏßÄÎäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Í±¥Ï°∞Ìïú ÎÇòÎ≠áÏûéÏùÑ ÎßåÏßà Îïå ÎÇòÎäî ÏÜåÎ¶¨Îäî?",

        sound: "q11.mp3",

        options: ["Ï∂ïÏ∂ïÌïú ÌùôÏùÑ ÎßåÏßÄÎäî ÏÜåÎ¶¨", "ÎßàÎ•∏ ÎÇòÎ≠áÏûéÏùÑ ÏÜêÏúºÎ°ú Íµ¨Í∏∞Í±∞ÎÇò ÎπÑÎπÑÎäî ÏÜåÎ¶¨", "Ï¢ÖÏù¥Î•º Ï∞¢Îäî ÏÜåÎ¶¨", "ÎπÑ Ïò§Îäî ÎÇ† Ïö∞ÏÇ∞ÏùÑ ÌéºÏπòÎäî ÏÜåÎ¶¨"],

        answerIndex: 1 

    },

    {

        q: "Ïó¥Îëê Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'ÎÇòÎ≠áÏûé ÏÜêÏúºÎ°ú Ïä§ÏπòÎäî ÎßåÏßÄÎäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Ïù¥ ÏÜåÎ¶¨Îäî Î¨¥ÏóáÏùÑ Î¨òÏÇ¨Ìï†ÍπåÏöî?",

        sound: "q12.mp3",

        options: ["Ïà≤ ÏÜçÏùÑ Îõ∞Ïñ¥Îã§ÎãàÎäî ÏÜåÎ¶¨", "ÏÜêÏúºÎ°ú ÏûéÏÇ¨Í∑ÄÎì§ÏùÑ Ïì∏Ïñ¥ÎÇ¥Î¶¥ Îïå ÎÇòÎäî 'ÏÇ¨ÏÇ≠' ÏÜåÎ¶¨", "Î∞îÏúÑÍ∞Ä Íµ¥Îü¨Í∞ÄÎäî ÏÜåÎ¶¨", "ÎÇòÎ¨¥Ïóê Í∏∞ÎåÄÏñ¥ Ïâ¨Îäî ÏÜåÎ¶¨"],

        answerIndex: 1 

    },

    {

        q: "Ïó¥ÏÑ∏ Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'ÎÇôÏóΩ Î∞üÎäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Ïù¥ ÏÜåÎ¶¨Í∞Ä Í∞ÄÏû• Ïûò ÎÇòÎäî Ï°∞Í±¥ÏùÄ?",

        sound: "q13.mp3",

        options: ["ÌùôÎ∞îÎã•ÏùÑ Í±∑Îäî ÏÜåÎ¶¨", "Ï†ñÏùÄ ÏïÑÏä§ÌåîÌä∏ ÏúÑÎ•º Í±∑Îäî ÏÜåÎ¶¨", "Í±¥Ï°∞Ìïú ÎÇôÏóΩ ÏúÑÎ•º Í±∏ÏùÑ Îïå ÎÇòÎäî 'Î∞îÏä§ÎùΩ' ÏÜåÎ¶¨", "ÎèåÍ≥ÑÎã®ÏùÑ Ïò§Î•¥Îäî ÏÜåÎ¶¨"],

        answerIndex: 2 

    },

    {

        q: "Ïó¥ÎÑ§ Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'ÎèåÎÅºÎ¶¨ Î∂ÄÎî™ÌûàÎäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Ïù¥ ÏÜåÎ¶¨Îäî?",

        sound: "q14.mp3",

        options: ["Î∂ÄÎìúÎü¨Ïö¥ Î™®ÎûòÏïåÏù¥ Íµ¥Îü¨Í∞ÄÎäî ÏÜåÎ¶¨", "Ìùô ÏÜçÏùò ÎèåÏùÑ ÌååÎÇ¥Îäî ÏÜåÎ¶¨", "Îëê Í∞úÏùò Îã®Îã®Ìïú ÎèåÎ©©Ïù¥Í∞Ä Ï∂©ÎèåÌïòÎäî ÏÜåÎ¶¨", "Ïá†ÏôÄ ÎèåÏù¥ ÎßàÏ∞∞ÌïòÎäî ÏÜåÎ¶¨"],

        answerIndex: 2 

    },

    {

        q: "Ïó¥Îã§ÏÑØ Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'ÎßàÎ•∏ ÎÇòÎ≠áÏûéÏúºÎ°ú ÎèåÏùÑ Í∏ÅÍ≥† ÏπòÎäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Ïù¥ ÏÇ¨Ïö¥ÎìúÎ•º Îì§Î†§Ï£ºÎäî ÌñâÏúÑÎäî?",

        sound: "q15.mp3",

        options: ["Î∞îÏúÑÎ•º Íπ®Îäî ÏÜåÎ¶¨", "ÎèåÎ©©Ïù¥Î°ú ÎèåÎ©©Ïù¥Î•º ÏπòÎäî ÏÜåÎ¶¨", "Îèå ÌëúÎ©¥ÏùÑ ÎßàÎ•∏ ÎÇòÎ≠áÏûéÏúºÎ°ú Î¨∏ÏßÄÎ•¥Îäî ÏÜåÎ¶¨", "ÎÇòÎ≠áÏûéÏùÑ Îèå ÏúÑÏóê Ïò¨Î†§ÎÜìÎäî ÏÜåÎ¶¨"],

        answerIndex: 2 

    },

    {

        q: "Ïó¥Ïó¨ÏÑØ Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'Î¨º ÌùêÎ•¥Îäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Ïù¥ ÏÜåÎ¶¨Îäî Ï£ºÎ°ú Ïñ¥Îñ§ Ïû•ÏÜåÏóêÏÑú Îì§Î¶¥ÍπåÏöî?",

        sound: "q16.mp3",

        options: ["ÎßàÎ•∏ ÎïÖ", "Ìè≠Ìè¨, ÏãúÎÉáÍ∞Ä, ÏàòÎèÑÍº≠ÏßÄ Îì±", "Ï°∞Ïö©Ìïú Î∞© Ïïà", "Î∞îÎûåÏù¥ Î∂ÄÎäî Îì§Ìåê"],

        answerIndex: 1 

    },

    {

        q: "Ïó¥ÏùºÍ≥± Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'Î∞îÎûåÏóê ÎÇòÎ≠áÏûéÏóêÏÑú Îñ®Ïñ¥ÏßÄÎäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Ïù¥ ÏÜåÎ¶¨Í∞Ä Ï†ÑÎã¨ÌïòÎäî ÎäêÎÇåÏùÄ?",

        sound: "q17.mp3",

        options: ["ÎÇòÎ≠áÍ∞ÄÏßÄÍ∞Ä Í∫æÏù¥Îäî Í∞ïÌïú ÏÜåÎ¶¨", "Î∞îÎûå ÎïåÎ¨∏Ïóê ÏûéÏù¥ ÎÇòÎ¨¥ÏóêÏÑú Î∂ÑÎ¶¨ÎêòÏñ¥ Îñ®Ïñ¥ÏßÄÎäî ÏÜåÎ¶¨", "ÎïÖÏóê Îñ®Ïñ¥ÏßÑ ÏûéÏùÑ Ï£ºÏõå Î™®ÏúºÎäî ÏÜåÎ¶¨", "ÎÇòÎ¨¥Ïóê Îß§Îã¨Î¶∞ Ïó¥Îß§Í∞Ä Îñ®Ïñ¥ÏßÄÎäî ÏÜåÎ¶¨"],

        answerIndex: 1 

    },

    {

        q: "Ïó¥Ïó¨Îçü Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'Î∞îÎûåÏù¥ ÎÇòÎ≠áÏûé Ïä§ÏπòÎäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Ïù¥ ÏÜåÎ¶¨Ïùò ÌäπÏßïÏùÄ?",

        sound: "q18.mp3",

        options: ["ÏûîÏûîÌïú Î∞îÎûåÏóê ÏûéÎì§Ïù¥ ÎßàÏ∞∞ÌïòÎ©∞ ÎÇòÎäî 'Ïâ¨Ïùµ' ÏÜåÎ¶¨", "ÎÇòÎ≠áÍ∞ÄÏßÄÍ∞Ä Î∂ÄÎü¨ÏßÄÎäî ÏÜåÎ¶¨", "Ï≤úÎë•Î≤àÍ∞úÍ∞Ä ÏπòÎäî ÏÜåÎ¶¨", "ÏÉàÍ∞Ä Îπ†Î•¥Í≤å ÎÇ†ÏïÑÍ∞ÄÎäî ÏÜåÎ¶¨"],

        answerIndex: 0 

    },

    {

        q: "Ïó¥ÏïÑÌôâ Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'ÏãúÎÉáÎ¨º' ÏÜåÎ¶¨ÏûÖÎãàÎã§. Ïù¥ ÏÜåÎ¶¨Îäî?",

        sound: "q19.mp3",

        options: ["Î∞îÎã∑Î¨ºÏù¥ Ï≤†Ïç©Ïù¥Îäî ÏÜåÎ¶¨", "ÌùêÎ¶ÑÏù¥ Îπ†Î•¥ÏßÄ ÏïäÍ≥† ÏñïÏùÄ Î¨ºÏù¥ ÌùêÎ•¥Îäî ÏÜåÎ¶¨", "ÌååÏù¥ÌîÑÍ∞Ä ÌÑ∞ÏßÄÎäî ÏÜåÎ¶¨", "ÎπÑÍ∞Ä ÏßÄÎ∂ïÏóê Îñ®Ïñ¥ÏßÄÎäî ÏÜåÎ¶¨"],

        answerIndex: 1 

    },

    {

        q: "Ïä§Î¨¥ Î≤àÏß∏ ÏÇ¨Ïö¥ÎìúÎäî 'ÏûêÍ∞à Í∏∏ Í±∑Îäî ÏÜåÎ¶¨'ÏûÖÎãàÎã§. Ïù¥ ÏÜåÎ¶¨Î•º ÎÇº Ïàò ÏûàÎäî ÏÉÅÌô©ÏùÄ?",

        sound: "q20.mp3",

        options: ["ÌëπÏã†Ìïú Î™®ÎûòÏÇ¨Ïû• ÏúÑÎ•º Í±∑Îäî ÏÜåÎ¶¨", "ÏûîÎîîÎ∞≠ ÏúÑÎ•º Í±∑Îäî ÏÜåÎ¶¨", "Îã®Îã®Ìïú ÏûêÍ∞àÏù¥ ÍπîÎ¶∞ Í∏∏ÏùÑ Î∞úÎ°ú Î∞üÏùÑ Îïå ÎÇòÎäî ÏÜåÎ¶¨", "Îàà ÏúÑÎ•º Í±∑Îäî ÏÜåÎ¶¨"],

        answerIndex: 2 

    }
];

// ÌòÑÏû¨ ÌÄ¥Ï¶à ÏÉÅÌÉú
let currentQuizIndex = 0;
let score = 0;
let selectedOptionIndex = null;

function initQuizPage() {
    const quizContent = document.getElementById('quiz-content');
    if (!quizContent) return; 

    // üö® [ÏàòÏ†ï] LS_START_TIME ÎåÄÏã† Î¨∏ÏûêÏó¥ Î¶¨ÌÑ∞Îü¥ 'quizStartTime' ÏÇ¨Ïö©
    if (!localStorage.getItem('quizStartTime')) {
        localStorage.setItem('quizStartTime', Date.now());
    }

    loadQuiz(currentQuizIndex);

    const soundButton = document.getElementById('sound-button');
    if (soundButton) {
        soundButton.onclick = playCurrentSound;
    }
    
    const completeButton = document.getElementById('complete-selection-button');
    if (completeButton) {
        completeButton.onclick = handleSelectionComplete;
    }
}

// -------------------- ÌÄ¥Ï¶à Î°úÎìú Î∞è UI ÏóÖÎç∞Ïù¥Ìä∏ --------------------

function loadQuiz(index) {
    
    // ÌÄ¥Ï¶à ÏôÑÎ£å Ï°∞Í±¥ Í≤ÄÏÇ¨
    if (index >= QUIZ_TOTAL_COUNT) {
        
        // 1. ÏµúÏ¢Ö Ï†êÏàòÎ•º Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóê Ï†ÄÏû• (LS_USER_SCORE ÎåÄÏã† Î¨∏ÏûêÏó¥ 'userScore' ÏÇ¨Ïö©)
        localStorage.setItem('userScore', score); 
        
        // 2. üö® [ÏàòÏ†ï] YouTube ID (main.jsÏóêÏÑú "DvP6qr1u5ac")Î•º Î¨∏ÏûêÏó¥ Î¶¨ÌÑ∞Îü¥Î°ú ÏßÅÏ†ë ÏÇ¨Ïö©
        const YOUTUBE_ID = "DvP6qr1u5ac";
        window.location.href = `result_video.html?video=${YOUTUBE_ID}&nextPage=outro.html`;
        
        return; 
    }
    
    if (currentAudio) {
        currentAudio.pause();
        currentAudio.currentTime = 0;
    }
    
    const currentQuiz = quizData[index];
    currentQuizIndex = index;
    selectedOptionIndex = null;

    const statusElement = document.getElementById('quiz-status');
    if (statusElement) {
        statusElement.textContent = `Î¨∏Ï†ú ${index + 1} / ${QUIZ_TOTAL_COUNT}`;
    }
    
    document.getElementById('question-text').textContent = currentQuiz.q;

    const optionsContainer = document.getElementById('options-container');
    optionsContainer.innerHTML = '';
    currentQuiz.options.forEach((option, i) => {
        const button = document.createElement('button');
        button.className = 'option-btn';
        button.textContent = option;
        button.onclick = () => handleOptionSelection(button, i);
        optionsContainer.appendChild(button);
    });

    const completeButton = document.getElementById('complete-selection-button');
    if (completeButton) {
        completeButton.disabled = true;
    }
    
    playCurrentSound();
}

// -------------------- Ïù¥Î≤§Ìä∏ Ï≤òÎ¶¨ --------------------

function playCurrentSound() {
    if (currentAudio) {
        currentAudio.pause();
        currentAudio.currentTime = 0;
    }
    
    const soundPath = `/quiz-project/assets/sounds/${quizData[currentQuizIndex].sound}`;
    const audio = new Audio(soundPath);
    
    currentAudio = audio;

    audio.play().catch(e => console.error("Sound play failed:", e));
}

function handleOptionSelection(selectedButton, index) {
    document.querySelectorAll('.option-btn').forEach(btn => {
        btn.classList.remove('selected');
    });

    selectedButton.classList.add('selected');
    selectedOptionIndex = index;

    const completeButton = document.getElementById('complete-selection-button');
    if (completeButton) {
        completeButton.disabled = false;
    }
}

function handleSelectionComplete() {
    if (selectedOptionIndex === null) {
        console.log('Î≥¥Í∏∞Î•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
        return;
    }

    const currentQuiz = quizData[currentQuizIndex];
    if (selectedOptionIndex === currentQuiz.answerIndex) {
        score++;
    }

    loadQuiz(currentQuizIndex + 1);
}

document.addEventListener('DOMContentLoaded', initQuizPage);
